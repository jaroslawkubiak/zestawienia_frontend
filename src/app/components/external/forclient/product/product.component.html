<div class="product-lp">{{ index }}</div>
<div class="product-img-wrapper">
  <div class="product-img">
    <img [src]="position['imageUrl']" alt="image" *ngIf="position['imageUrl']" />
  </div>
  <div class="position-action-btn">
    <div
      class="comments-wrapper"
      pTooltip="Dodaj komentarz"
      tooltipPosition="bottom"
    >
      <div class="comments-cell flex-center">
        <i class="pi pi-comments" (click)="showComments(position.id)"></i>
        <p-badge
          [value]="position.commentsBadge.value"
          [severity]="position.commentsBadge.severity"
          [pTooltip]="position.commentsBadge.tooltip"
          class="nr-comments"
          badgeSize="large"
        ></p-badge>
      </div>
      Komentarze
    </div>
    <div class="{{ position.link ? 'cursor-pointer' : '' }} flex-center">
      @if(position.link) {
      <a
        href="{{ position.link }}"
        class="link flex-center"
        target="_blank"
        rel="noopener noreferrer"
        pTooltip="Otwórz link do produktu"
        tooltipPosition="bottom"
        ><i class="pi pi-link"></i>LINK</a
      >
      }
    </div>
  </div>
</div>
<div class="product-details">
  <div class="product-group">
    <li class="product-title">PRODUKT</li>
    <li class="product-name">{{ position.produkt }}</li>
  </div>
  <div class="product-group">
    <li class="product-title">PRODUCENT</li>
    <li class="product-name">{{ position.producent }}</li>
  </div>
  <div class="product-group">
    <li class="product-title">DOSTAWCA</li>
    <li class="product-name">
      {{ position.supplierId ? position.supplierId["company"] : "" }}
    </li>
  </div>
</div>
<div class="product-details">
  <div class="product-group">
    <li class="product-title">KOLEKCJA</li>
    <li class="product-name">{{ position.kolekcja }}</li>
  </div>
  <div class="product-group">
    <li class="product-title">NR KATALOGOWY</li>
    <li class="product-name">{{ position.nrKatalogowy }}</li>
  </div>
  <div class="product-group">
    <li class="product-title">KOLOR</li>
    <li class="product-name">{{ position.kolor }}</li>
  </div>
</div>
<div class="product-details">
  <div class="product-group">
    <li class="product-title">ILOŚĆ</li>
    <li class="product-name">
      {{ position.ilosc | number : "1.2-2" }}
    </li>
  </div>
  <div class="product-group">
    <li class="product-title">CENA BRUTTO</li>
    <li class="product-name">
      {{ position.brutto ? (position.brutto | number : "1.2-2") + " PLN" : "" }}
    </li>
  </div>
  <div class="product-group">
    <li class="product-title">WARTOŚĆ BRUTTO</li>
    <li class="product-name">
      {{
        position.wartoscBrutto
          ? (position.wartoscBrutto | number : "1.2-2") + " PLN"
          : ""
      }}
    </li>
  </div>
  <div class="product-group">
    <li class="product-title">STATUS</li>
    <li
      class="product-name status-wrapper {{ getStatusCss(position.status) }} "
    >
      {{ getStatusLabel(position.status) }}
    </li>
  </div>
</div>

<p-dialog
  [header]="header"
  [modal]="true"
  [(visible)]="showCommentsDialog"
  [style]="{ width: '70rem' }"
  [dismissableMask]="true"
>
  <app-comments
    [comments]="comments"
    [positionId]="positionId"
    [setId]="setId"
    [set]="set"
    [isUser]="false"
    [commentsDialog]="showCommentsDialog"
    (updateComments)="onUpdateComments($event)"
  />
</p-dialog>
